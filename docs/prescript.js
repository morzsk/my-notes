(function(){function r(c){let e=new RegExp(".(dark|light).(png|jpg|jpeg|gif|bmp|svg|webp)$"),t={theme:1,extension:2};Object.values(document.getElementsByTagName("img")).forEach(a=>{if(a.src.match(e)){let m=a.src,n=e.exec(m);a.src=m.replace(e,`.${c}.${n[t.extension]}`)}})}function d(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}document.addEventListener("nav",c=>{let e=localStorage.getItem("theme")??d();Object.values(document.getElementsByTagName("article")[0].getElementsByTagName("a")).forEach(t=>{if(t.href.endsWith(".excalidraw")){let a=document.createElement("img");a.src=`${t.href}.${e}.svg`,t.replaceWith(a)}}),r(e)});var o=localStorage.getItem("theme")??d();document.documentElement.setAttribute("saved-theme",o);var l=c=>{let e=new CustomEvent("themechange",{detail:{theme:c}});r(c),document.dispatchEvent(e)};document.addEventListener("nav",()=>{let c=m=>{let n=m.target?.checked?"dark":"light";document.documentElement.setAttribute("saved-theme",n),localStorage.setItem("theme",n),l(n)},e=m=>{let n=m.matches?"dark":"light";document.documentElement.setAttribute("saved-theme",n),localStorage.setItem("theme",n),t.checked=m.matches,l(n)},t=document.querySelector("#darkmode-toggle");t.addEventListener("change",c),window.addCleanup(()=>t.removeEventListener("change",c)),o==="dark"&&(t.checked=!0);let a=window.matchMedia("(prefers-color-scheme: dark)");a.addEventListener("change",e),window.addCleanup(()=>a.removeEventListener("change",e))})})();
